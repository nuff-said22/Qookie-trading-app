let memeCoins = [];

// Seed more than 500 random meme coins from generated list
function seedCoins() {
  const randomNames = ['MEGABULL978', 'VIPCAT187', 'NEOBO104', 'FUNWHALE692', 'HODLPRO30', 'FLOKIELITE46', 'SHARKFLOKI865', 'MOONLAMBO736', 'MEGAWIF679', 'BONKPUMP98', 'LAMBOBULL75', 'WHALECOIN820', 'MOONMEGA608', 'BEARVIP83', 'LAMBOHYPER600', 'SHARKDUMP58', 'FROGX93', 'DUMPHYPER643', 'DUMPSHARK812', 'DUMPBULL720', 'WIFFLOKI148', 'ULTRABONK313', 'COINVIP940', 'WHALEQ81', 'FROGHYPER530', 'FROGGIGA36', 'VIPTOKEN887', 'BEARHYPER683', 'FLOKIX95', 'HODLVIP749', 'LORDFLOKI270', 'QUEENBO405', 'MEMEHAT686', 'PEPEPRO922', 'DUMPFUN485', 'SHARKLAMBO474', 'FUNDUMP839', 'KINGNEO153', 'CATWIF878', 'FUNNYX622', 'BULLX77', 'CRABLAMBO892', 'FROGTOKEN34', 'BEARPUMP978', 'FUNELITE21', 'VIPWHALE72', 'BEARBO851', 'PROFLOKI513', 'PUMPEE86', 'SHIBPUMP663', 'HODLHAT354', 'CATFUN249', 'WIFWHALE959', 'ELITEWHALE869', 'ELITEPEPE62', 'PUMPSHARK619', 'ELITEDUMP885', 'TERAMAX381', 'TOADTOAD165', 'TOADPUMP70', 'DUMPDUMP437', 'SHIBPRO15', 'LAMBWIF529', 'PROWIF729', 'HODLKING519', 'FLOKIFROG467', 'PUMPFUNNY941', 'HYPERFROG664', 'COINCAT319', 'WHALESHARK909', 'HATPEPE192', 'LAMBPUMP633', 'SHARKTOAD896', 'NEOKING857', 'COINELITE970', 'FUNNYHYPER78', 'TERAPUMP689', 'DUMPSHARK505', 'TOADWHALE434', 'KINGMEGA537', 'TOADPUMP13', 'LAMBHAT909', 'ULTRAMEGA208', 'PROPRO444', 'WIFVIP1', 'SHARKELITE75', 'BULLMEGA565', 'BONKSHIB445', 'QUEENFUNNY619', 'AFROMEGA808', 'MEGALAMB172', 'MOONTERA34', 'NEOHAT493', 'ELITEPEPE755', 'TOKENSHARK636', 'FUNQUEEN104', 'FUNNYTERA626', 'DOGETERA206', 'NEOWHALE506', 'WIFFLOKI803', 'DUMPNEO386', 'FUNNYCOIN602', 'LORDX345', 'CATLORD64', 'FLOKIMAX449', 'MEMEFUN600', 'PEPEDUMP9', 'HYPERDUMP502', 'PUMPDUMP970', 'MOONLAMB855', 'KINGFUN403', 'WIFBONK736', 'PUMPLORD15', 'LLORD14', 'PUMPNEO82', 'FLOKIPEPE469', 'FUNCOIN510', 'PUMPHYPER98', 'WIFDUMP880', 'LAMBOLAMBO575', 'CATCOIN442', 'SHARKLORD28', 'BEARSHARK489', 'TOADFUN36', 'ULTRAPRO409', 'BULLDUMP496', 'BONKFUNNY482', 'VIPLAMBO678', 'BONMP96', 'HODLKING266', 'BOPUMP670', 'WHALETOKEN117', 'AFROKING120', 'LAMBOX481', 'LAMBO777', 'SHIBLAMB749', 'HYPERWIF67', 'CRABMEGA162', 'MOONNEO590', 'VIPBEAR951', 'WIFSHIB640', 'MEMECHAD29', 'NEOMEGA377', 'HATLAMB174', 'DUMPPUMP165', 'FROGCOIN728', 'LAMBSHARK308', 'BULLX408', 'AFROCRAB419', 'MEMEPUMP25', 'ELITEBO105', 'PUMPLAMB648', 'MEMECRAB12', 'SHARKHAT983', 'LAMBDUMP384', 'MEGADUMP424', 'LAMBODOGE851', 'MAXLORD55', 'SHARKSHARK240', 'PEPEPEPE334', 'COINHYPER254', 'BONKGIGA74', 'PUMP70', 'FUNNYHAT446', 'MEMECOIN491', 'HATAFRO453', 'PROWIF673', 'ELITEPUMP50', 'TOADX431', 'CATQUEEN28', 'WIFAFRO323', 'SHIBDUMP505', 'DUMPTERA349', 'LAMBOLAMB508', 'DOGEHYPER445', 'MOONCOIN637', 'FROGHYPE10', 'WIFQUEEN723', 'MAXSHIB136', 'HYPERBONK924', 'LAMBHYPER669', 'GIGAELITE38', 'PROULTRA503', 'HYPER64', 'WIFDOGE909', 'AFROSHARK621', 'CRABWIF47', 'MAX98', 'NEOCAT98', 'PEPECOIN8', 'FUNDUMP678', 'WIFLAMBO506', 'CATEEN52', 'TERATOAD363', 'SHARKMOON368', 'DUMPHODL560', 'HODLULTRA3', 'DOGEFUN160', 'MEGAHODL763', 'TOADFROG452', 'WIFLORD671', 'PEPEBO707', 'FROGSHIB787', 'CATVIP8', 'FLOKIBONK840', 'LAMBBO680', 'LAMBOBEAR815', 'MEMEPEPE160', 'MEMEMAX44', 'AFROHYPER16', 'WHALETERA295', 'HATFROG398', 'PEPEPRO97', 'QUEENWHALE770', 'FUNNYDUMP442', 'FUNNYTOKEN266', 'WHALEMOON899', 'TERABULL828', 'DUMPPUMP474', 'PEPEMOON919', 'ELITEQUEEN386', 'PEPEGIGA95', 'FLOKILORD1', 'TOADPRO4', 'WIFHAT400', 'SHARKFUNNY349', 'TOADULTRA62', 'WIFMEME694', 'FUNNYTOAD431', 'LAMBLAMB954', 'PUMPMAX28', 'WHALEDUMP88', 'FUNNYSHARK94', 'MEMEHODL484', 'LAMBMOON2', 'PEPEMEGA2', 'FLOKISHARK893', 'MEGAQUEEN374', 'SHARKHYPER828', 'NEOMOON702', 'TERAGIGA819', 'WIFHYPER897', 'HYPERPEPE788', 'WIFDUMP514', 'HODLMAX904', 'BULLWIF44', 'WHALEX88', 'SHIBFLOKI866', 'ULTRATERA845', 'PUMPMAX78', 'WIFULTRA457', 'TERAPUMP769', 'FUNELITE90', 'DUMPFUNNY944', 'DUMPDUMP376', 'SHARKWIF920', 'LORDAFRO901', 'BONKTOAD671', 'CRABTOKEN293', 'SHARKDUMP439', 'BULLVIP108', 'WHALEMEGA34', 'MAXKING408', 'BOSHARK585', 'SHIBDUMP22', 'DOGEMAX412', 'FLOKIVIP11', 'AFROMEGA13', 'CRABHYPER333', 'MEGADOGE457', 'MEMEGIGA939', 'SHARKDUMP239', 'TERABONK734', 'SHARKMAX11', 'BULLCAT13', 'HATTERA977', 'WHALEMAX76', 'FUNELITE939', 'TOADHAT403', 'BONKCOIN87', 'MAXHYPER218', 'ELITEMEME241', 'LAMBPRO28', 'HODLMAX628', 'COINFUNNY37', 'BULLDUMP36', 'SHIBELITE699', 'GIGA71', 'COINBONK914', 'WHALEQUEEN274', 'TOADELITE624', 'FUNLORD742', 'SHARKVIP576', 'CRABHODL225', 'PEPETERA60', 'PUMPHYPER78', 'AFROSHARK49', 'SHIBSHARK311', 'WIFULTRA296', 'MOONFUN448', 'SHARKFROG250', 'TOKENPUMP248', 'WIFWIF177', 'SHIBAFRO702', 'DUMPFROG973', 'SHARKWHALE405', 'DUMPGIGA763', 'ELITEHODL602', 'SHIBKING741', 'ELITETOAD926', 'SHARKFUN923', 'PEPEPRO377', 'SHIBBEAR921', 'GIGADOGE3', 'PEPENEO69', 'FLOKIMEGA97', 'NEOWIF749', 'MAXPUMP634', 'CRABMASTER74', 'DOGEFLOKI110', 'LAMSTER29', 'CATLORD421', 'MEMEPRO31', 'PUMPBONK600', 'GIGACOIN126', 'HATLAMBO554', 'QUEENBO741', 'GIGAELITE745', 'LAMBOPUMP235', 'MAXVIP16', 'SHARKBEAR541', 'DOGEHYPER271', 'MEMEULTRA392', 'SHIBPUMP30', 'CATMAX6', 'PUMPMEGA832', 'FROGFLOKI158', 'HYPERWHALE138', 'MEGANEO689', 'MAXMEGA539', 'BOTERA535', 'WHALEELITE29', 'GIGAFUN619', 'CRABWHALE902', 'DOGEFUN90', 'BOFUN88', 'PUMPMAX431', 'WIFLORD491', 'BONKFROG473', 'MOONNERRO67', 'FLOKIAFRO641', 'FROGSHARK135', 'ELITELAMBO619', 'LORDPUMP371', 'KINGBULL840', 'TERATERA461', 'MOONBULL954', 'WHALECRAB470', 'MOONCRAB752', 'LORDNEO952', 'KINGDUMP424', 'WHALEULTRA200', 'LAMBO559', 'FUNWIF418', 'HYPERHAT231', 'FROGCOIN32', 'BOAFRO61', 'DOGEMAX91', 'DUMPVIP54', 'SHARKCAT232', 'MEMEPUMP172', 'FROGBEAR358', 'PUMPDUMP658', 'HATMEGA862', 'WIFNEO987', 'WHALECRAB66', 'KINGMAX794', 'MOONBONK611', 'DOGEFUN280', 'MOONPEPE114', 'GIGAPUMP711', 'FLOKIBULL226', 'PUMPNEO564', 'TERACAT760', 'FUNHAT33', 'BULLTERA4', 'PEPELORD10', 'FUNNYMAX628', 'HYPERMEGA263', 'FUNSHARK860', 'PUMPSHARK299', 'PEPECAT802', 'WHALEPEPE681', 'CRABCAT429', 'LAMBMOON187', 'HODLCOIN12', 'AFROCOIN795', 'PUMPPUMP884', 'DUMPLAMBO432', 'FLOKIHYPER400', 'AFROFUNNY474', 'KINGPEPE674', 'CATBONK985', 'TERAPRO994', 'SHIBTOAD993', 'WIFMOON612', 'HYPERHAT801', 'QUEENNEO295', 'SHARKMAX954', 'KINGS82', 'ELITESHARK358', 'QUEENCOIN457', 'FROGDOGE299', 'BEARDUMP61', 'PUMPKING580', 'WIFSHARK410', 'TOADELITE60', 'SHARKTOAD596', 'PUMPMOON583', 'VIPDOGE992', 'MOONLORD89', 'WHALEFLOKI971', 'ULTRALAMBO604', 'SHIBMOON587', 'SHIBPEPE324', 'FROGFUN878', 'NEOULTRA513', 'MEGAMEGA292', 'VIPPUMP815', 'MAXKING284', 'FLOP40', 'FROGBONK402', 'QUEENIE11', 'DUMPAFRO783', 'HYPPER33', 'NEOBEAR532', 'HYPERDUMP266', 'PEPEAFRO358', 'TERAVIP287', 'PUMPMOON238', 'PEPEBONK487', 'CRABSHARK548', 'MEGA22', 'HYPERGIGA209', 'CATSHARK55', 'VIPQUEEN644', 'CATTOKEN48', 'FLOKIFUNNY693', 'FROGDUMP297', 'BONKCAT339', 'LAMBSHARK150', 'FUNKING722', 'VIPKING186', 'PUMPMEGA395', 'GIGAMEGA841', 'PUMPNEO240', 'MEGAPUMP651', 'WHALENEO18', 'WHALEWIF726', 'LAMBOFUNNY77', 'LAMBOCOIN46', 'WIFMEGA100', 'LORDELITE360', 'LAMBTERA715', 'PEPEBONK633', 'WIFHYPER14', 'QUEENPUMP697', 'TERADUMP325', 'BONKMEGA635', 'TOADLORD36', 'TERAELITE633', 'VIPQUEEN806', 'NEOHAT964', 'MOONFLOKI991', 'SHIBBULL358', 'TERAMAX620', 'TOKENLAMBO112', 'HYPERBEAR38', 'TOKENDUMP220', 'FROGQUEEN169', 'TOADTERA9', 'PEPELORD52', 'PUMPDUMP29', 'FUNNYSHARK401', 'LORDTOKEN686', 'DUMPLAMBO774', 'NEOPEPE81', 'PUMPMOON883', 'DUMPTOAD379', 'KINGKING111', 'PUMPFLOKI421', 'FLOKIAFRO641', 'MEMEELITE871', 'DUMPBEAR429', 'WHALEPUMP92', 'LAMBODUMP281', 'GIGALAMBO561', 'WIFLORD78', 'LAMBOULTRA857', 'KINGWIF93', 'LAMBOCOIN547'];
  memeCoins = randomNames.map((symbol, index) => ({
    symbol,
    price: Math.random() * 99 + 1, // 1-100 USDT
    change24h: 0,
    volume: Math.random() * 1000000, // Mock
    volatility: Math.random() * 0.04 + 0.01, // 1-5%
  }));
}

// Random walk update
function updatePrices(io) {
  memeCoins = memeCoins.map(coin => {
    const delta = (Math.random() * 2 - 1) * coin.volatility; // -vol to +vol
    let newPrice = coin.price * (1 + delta);
    if (newPrice < 0.01) newPrice = 0.01; // Prevent near-zero/negative
    const change24h = ((newPrice - coin.price) / coin.price) * 100;
    return { ...coin, price: newPrice, change24h };
  });
  io.emit('priceUpdate', memeCoins); // Broadcast to all
}

// Start engine
function startPriceEngine(io) {
  seedCoins();
  setInterval(() => updatePrices(io), Math.random() * 4000 + 1000); // 1-5 sec
  return memeCoins;
}

module.exports = { startPriceEngine };